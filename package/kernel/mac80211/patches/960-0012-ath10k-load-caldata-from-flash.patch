Index: linux-4.9.91/drivers/net/wireless/ath/ath10k/pci.c
===================================================================
--- linux-4.9.91.orig/drivers/net/wireless/ath/ath10k/pci.c	2018-07-24 16:55:52.347330730 +0800
+++ linux-4.9.91/drivers/net/wireless/ath/ath10k/pci.c	2018-07-24 17:02:45.651328626 +0800
@@ -20,6 +20,8 @@
 #include <linux/interrupt.h>
 #include <linux/spinlock.h>
 #include <linux/bitops.h>
+#include <linux/mtd/mtd.h>
+#include <linux/mtd/partitions.h>
 
 #include "core.h"
 #include "debug.h"
@@ -2702,8 +2704,11 @@
 {
 	u8 *caldata = NULL;
 	size_t calsize, i;
-	int ret;
-
+	
+	struct mtd_info *mtd = NULL;
+	int ret, retlen;
+	bool fetched = false;
+	
 	if (!QCA_REV_9887(ar))
 		return -EOPNOTSUPP;
 
@@ -2717,11 +2722,33 @@
 	for (i = 0; i < calsize; i++) {
 		ret = ath10k_pci_read_eeprom(ar, i, &caldata[i]);
 		if (ret)
-			goto err_free;
+			goto err_try_flash;
 	}
 
 	if (!ath10k_pci_validate_cal(caldata, calsize))
-		goto err_free;
+		goto err_try_flash;
+
+        fetched = true;
+
+err_try_flash:
+        if (!fetched) {
+                mtd = get_mtd_device_nm("art");
+                if (IS_ERR(mtd)) {
+                        ath10k_err(ar, "can not open partition [art]\n");
+                        goto err_free;
+                }
+
+                // read from 0x5000 of art
+                ret = mtd_read(mtd, 0x5000, calsize, &retlen, caldata);
+                put_mtd_device(mtd);
+                if ((retlen != calsize) || ret) {
+                        ath10k_err(ar, "can not read caldata from partition [art]\n");
+                        goto err_free;
+                }
+
+                ath10k_info(ar, "caldata loaded from partition [art]\n");
+        }
+
 
 	*data = caldata;
 	*data_len = calsize;
